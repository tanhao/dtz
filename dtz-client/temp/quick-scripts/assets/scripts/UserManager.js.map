{"version":3,"sources":["UserManager.js"],"names":["cc","Class","extends","Component","properties","userId","userName","account","sex","headImgUrl","balance","ip","sign","onLoad","lingshiAuth","th","wc","show","http","get","onAuth","err","data","log","self","userManager","baseURL","hallAddr","login","callback","errcode","errmsg","id","name","director","loadScene","createRoom","config","params","JSON","stringify","alert","roomId","enterRoom"],"mappings":"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","file":"UserManager.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        userId:null,\r\n        userName:null,\r\n        account:null,\r\n        sex:null,\r\n        headImgUrl:null,\r\n        balance:0,\r\n        ip:null,\r\n        sign:null,\r\n    },\r\n\r\n    onLoad: function () {\r\n    },\r\n\r\n    // update: function (dt) {\r\n\r\n    // },\r\n\r\n    // start: function (dt) {\r\n\r\n    // },\r\n\r\n    lingshiAuth:function(){\r\n        th.wc.show(\"正在登录游戏\");\r\n        th.http.get('/lingshi_auth',{account:'oy4oyv4IBaxtkPjSq9ee4w42QazA'},this.onAuth);\r\n    },\r\n\r\n    onAuth:function(err,data){\r\n        if(err){\r\n            cc.log(err);\r\n            return ;\r\n        }\r\n        var self = th.userManager;\r\n        self.account = data.account;\r\n        self.sign = data.sign;\r\n        th.http.baseURL = 'http://'+data.hallAddr;\r\n\r\n        cc.log(th.http.baseURL);\r\n        self.login();\r\n    },\r\n\r\n    login:function(){\r\n        var self = this;\r\n        var callback = function(err,data) {\r\n             if(err||data.errcode){\r\n                 cc.log(err,data.errmsg);\r\n                 return;\r\n             }\r\n             self.sex = data.sex;\r\n             self.userId = data.id;\r\n             self.account = data.account;\r\n             self.balance = data.balance;\r\n             self.userName = data.name;\r\n             self.headImgUrl = data.headImgUrl;\r\n             cc.director.loadScene(\"hall\");\r\n        };\r\n        th.wc.show(\"正在登录游戏\");\r\n        th.http.get('/login',{account:self.account,sign:self.sign},callback)\r\n    },\r\n\r\n    createRoom : function(config){\r\n        var params={\r\n            account:th.userManager.account,\r\n            sign:th.userManager.sign,\r\n            config:JSON.stringify(config)\r\n        }\r\n        var callback = function(err,data) {\r\n            //cc.log(\"FFFFFF:\",JSON.stringify(data));\r\n            if(err||data.errcode){\r\n                th.wc.show();\r\n                th.alert.show('提示',data.errmsg,null,false); //\r\n            }else{\r\n                cc.log(\"create room success, roomid:\"+data.roomId);\r\n            }\r\n            \r\n        };\r\n        th.wc.show(\"正在创建房间\");\r\n        th.http.get('/create_private_room',params,callback);\r\n    },\r\n\r\n    enterRoom : function(roomId,callback){\r\n        var self = this;\r\n    }\r\n    \r\n});\r\n"]}