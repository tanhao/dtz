{"version":3,"sources":["Seat.js"],"names":["cc","Class","extends","Component","properties","headImg","Sprite","lblName","Label","lblScore","offline","fangzhu","emoji","countdown","ready","chat","restCard","Node","_userId","_userName","_headImgUrl","_sex","_score","_restCard","_isOffline","_isReady","_isFangzhu","_lastChatTime","onLoad","node","active","refresh","string","setUserID","id","setUserName","name","setSex","sex","setHeadImg","headImgUrl","self","loader","load","url","type","err","texture","headSpriteFrame","SpriteFrame","Rect","width","height","spriteFrame","setScore","score","setFangzhu","isFangzhu","setReady","isReady","setOffline","isOffline","setRestCard","rest","getChildByName","getComponent","setChat","content","setEmoji","update","dt"],"mappings":"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","file":"Seat.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n       headImg:cc.Sprite,\r\n       lblName:cc.Label,\r\n       lblScore:cc.Label,\r\n       offline:cc.Sprite,\r\n       fangzhu:cc.Sprite,\r\n       emoji:cc.Sprite,\r\n       countdown:cc.Sprite,\r\n       ready:cc.Sprite,\r\n       chat:cc.Label,\r\n       restCard:cc.Node,\r\n\r\n       _userId:null,\r\n       _userName:\"\",\r\n       _headImgUrl:null,\r\n       _sex:0,\r\n       _score:0,\r\n       _restCard:0,\r\n       _isOffline:false,\r\n       _isReady:false,\r\n       _isFangzhu:false,\r\n       _lastChatTime:-1,\r\n    },\r\n\r\n    onLoad () {\r\n        if(this.chat){\r\n            this.chat.node.active=false;\r\n        }\r\n        if(this.emoji){\r\n            this.emoji.node.active=false;\r\n        }\r\n        if(this.countdown){\r\n            this.countdown.node.active=false;\r\n        }\r\n        if(this.restCard){\r\n            this.restCard.active=false;\r\n        }\r\n        this.refresh();\r\n    },\r\n\r\n    refresh:function(){\r\n        if(this._userName){\r\n            this.lblName.string=this._userName;\r\n        }\r\n        if(this._score){\r\n            this.lblScore.string=this._score;\r\n        }\r\n        if(this.offline){\r\n            this.offline.node.active = this._isOffline && this._userId != null;\r\n        }\r\n        \r\n        if(this.ready){\r\n            this.ready.node.active = this._isReady; \r\n        }\r\n        \r\n        if(this.fangzhu){\r\n            this.fangzhu.node.active = this._isFangzhu;    \r\n        }\r\n\r\n        //this.node.active = this._userId!=null;\r\n    },\r\n\r\n    setUserID:function(id){\r\n        if(id){\r\n            this._userId = id;\r\n        }\r\n    },\r\n\r\n    setUserName:function(name){\r\n        if(name){\r\n            this._userName = name;\r\n            this.lblName.string=name;\r\n        }\r\n    },\r\n\r\n    setSex:function(sex){\r\n        this._sex=sex;\r\n    },\r\n\r\n    setHeadImg:function(headImgUrl){\r\n        var self=this;\r\n        if(headImgUrl){\r\n            this._headImgUrl = headImgUrl;\r\n            cc.loader.load({url: headImgUrl, type: 'jpg'}, function (err, texture) {\r\n                if(!err){\r\n                    var headSpriteFrame = new cc.SpriteFrame(texture, cc.Rect(0, 0, texture.width, texture.height));\r\n                    self.headImg.spriteFrame=headSpriteFrame;\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    setScore:function(score){\r\n        if(score){\r\n            this._score = score;\r\n            this.lblScore.string=score;\r\n        }\r\n    },\r\n\r\n    setFangzhu:function(isFangzhu){\r\n        this._isFangzhu = isFangzhu;\r\n        if(this.fangzhu){\r\n            this.fangzhu.node.active =this._isFangzhu;\r\n        }\r\n    },\r\n    \r\n    setReady:function(isReady){\r\n        this._isReady = isReady;\r\n        if(this.ready){\r\n            this.ready.node.active = this._isReady; \r\n        }\r\n    },\r\n    \r\n    setOffline:function(isOffline){\r\n        this._isOffline = isOffline;\r\n        if(this.offline){\r\n            this.offline.node.active = this._isOffline && this._userId != null;\r\n        }\r\n    },\r\n\r\n    setRestCard:function(rest){\r\n        this._restCard = rest;\r\n        if(this.restCard){\r\n            this.restCard.active=rest>0;\r\n            this.restCard.getChildByName(\"poker_count\").getComponent(cc.Label).string = rest+\"\";\r\n        }\r\n    },\r\n\r\n    setChat:function(content){\r\n        if(this.chat){\r\n            this.emoji.node.active=false;\r\n            this.chat.node.active = true;\r\n            this.chat.getComponent(cc.Label).string = content;\r\n            this.chat.getChildByName(\"chat_msg\").getComponent(cc.Label).string = content;\r\n            this._lastChatTime = 3;\r\n        }\r\n    },\r\n\r\n    setEmoji:function(emoji){\r\n        if(this.emoji){\r\n            this.chat.node.active = false;\r\n            this.emoji.node.active=true;\r\n            this._lastChatTime = 3;\r\n        }\r\n    },\r\n\r\n    update: function (dt) {\r\n        if(this._lastChatTime > 0){\r\n            this._lastChatTime -= dt;\r\n            if(this._lastChatTime < 0){\r\n                this.chat.node.active = false;\r\n                this.emoji.node.active = false;\r\n            }\r\n        }\r\n    },\r\n    \r\n\r\n\r\n\r\n    /*\r\n    update (dt) {\r\n    },\r\n    */\r\n\r\n  \r\n\r\n});\r\n"]}