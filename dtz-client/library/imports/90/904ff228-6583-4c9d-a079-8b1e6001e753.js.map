{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Http.js"],"names":["qs","require","Http","cc","Class","extends","Component","statics","baseURL","get","path","params","callback","xhr","loader","getXMLHttpRequest","requestUrl","encodeURI","stringify","open","onreadystatechange","readyState","status","json","JSON","parse","responseText","e","th","wc","hide","send","post","setRequestHeader"],"mappings":";;;;;;AACA,IAAIA,KAAGC,QAAQ,QAAR,CAAP;;AAEA,IAAIC,OAAKC,GAAGC,KAAH,CAAS;AACdC,aAASF,GAAGG,SADE;;AAGdC,aAAQ;AACJC,iBAAQ,IADJ;AAEJC,aAAI,aAASC,IAAT,EAAcC,MAAd,EAAqBC,QAArB,EAA8B;AAC9B,gBAAIC,MAAMV,GAAGW,MAAH,CAAUC,iBAAV,EAAV;AACA,gBAAIC,aAAWd,KAAKM,OAAL,GAAaE,IAAb,GAAkB,GAAlB,GAAsBO,UAAUjB,GAAGkB,SAAH,CAAaP,MAAb,CAAV,CAArC;AACAE,gBAAIM,IAAJ,CAAS,KAAT,EAAeH,UAAf,EAA0B,IAA1B;AACAH,gBAAIO,kBAAJ,GAAyB,YAAY;AACjC,oBAAIP,IAAIQ,UAAJ,IAAkB,CAAlB,IAAwBR,IAAIS,MAAJ,IAAc,GAAd,IAAqBT,IAAIS,MAAJ,GAAa,GAA9D,EAAoE;AAChE,wBAAG;AACC,4BAAIC,OAAOC,KAAKC,KAAL,CAAWZ,IAAIa,YAAf,CAAX;AACAd,iCAAS,IAAT,EAAcW,IAAd;AACH,qBAHD,CAGC,OAAMI,CAAN,EAAQ;AACLf,iCAASe,CAAT,EAAW,IAAX;AACH,qBALD,SAKQ;AACJ,4BAAGxB,GAAGyB,EAAH,IAASzB,GAAGyB,EAAH,CAAMC,EAAlB,EAAqB;AACjB1B,+BAAGyB,EAAH,CAAMC,EAAN,CAASC,IAAT;AACH;AACJ;AACJ;AACJ,aAbD;AAcAjB,gBAAIkB,IAAJ;AACH,SArBG;AAsBJC,cAAK,cAAStB,IAAT,EAAcC,MAAd,EAAqBC,QAArB,EAA8B;AAC/B,gBAAIC,MAAMV,GAAGW,MAAH,CAAUC,iBAAV,EAAV;AACAF,gBAAIM,IAAJ,CAAS,MAAT,EAAiBjB,KAAKM,OAAL,GAAaE,IAA9B;AACAG,gBAAIoB,gBAAJ,CAAqB,cAArB,EAAoC,iDAApC;AACApB,gBAAIO,kBAAJ,GAAyB,YAAY;AACjC,oBAAIP,IAAIQ,UAAJ,IAAkB,CAAlB,IAAwBR,IAAIS,MAAJ,IAAc,GAAd,IAAqBT,IAAIS,MAAJ,IAAc,GAA/D,EAAqE;AACjE,wBAAG;AACC,4BAAIC,OAAOC,KAAKC,KAAL,CAAWZ,IAAIa,YAAf,CAAX;AACAd,iCAAS,IAAT,EAAcW,IAAd;AACH,qBAHD,CAGC,OAAMI,CAAN,EAAQ;AACLf,iCAASe,CAAT,EAAW,IAAX;AACH,qBALD,SAKQ;AACJ,4BAAGxB,GAAGyB,EAAH,IAASzB,GAAGyB,EAAH,CAAMC,EAAlB,EAAqB;AACjB1B,+BAAGyB,EAAH,CAAMC,EAAN,CAASC,IAAT;AACH;AACJ;AACJ;AACJ,aAbD;AAcDjB,gBAAIkB,IAAJ,CAASpB,MAAT;AACF;;AAzCG;AAHM,CAAT,CAAT","file":"Http.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["\r\nvar qs=require(\"npm/qs\");\r\n\r\nvar Http=cc.Class({\r\n    extends: cc.Component,\r\n\r\n    statics:{\r\n        baseURL:null,\r\n        get:function(path,params,callback){\r\n            var xhr = cc.loader.getXMLHttpRequest();\r\n            var requestUrl=Http.baseURL+path+'?'+encodeURI(qs.stringify(params));\r\n            xhr.open(\"GET\",requestUrl,true);\r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n                    try{\r\n                        var json = JSON.parse(xhr.responseText);\r\n                        callback(null,json);\r\n                    }catch(e){\r\n                        callback(e,null);\r\n                    }finally{\r\n                        if(cc.th && cc.th.wc){\r\n                            cc.th.wc.hide();\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n            xhr.send();\r\n        },\r\n        post:function(path,params,callback){\r\n            var xhr = cc.loader.getXMLHttpRequest();\r\n            xhr.open(\"POST\", Http.baseURL+path);\r\n            xhr.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded;charset=UTF-8\");\r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status <= 207)) {\r\n                    try{\r\n                        var json = JSON.parse(xhr.responseText);\r\n                        callback(null,json);\r\n                    }catch(e){\r\n                        callback(e,null);\r\n                    }finally{\r\n                        if(cc.th && cc.th.wc){\r\n                            cc.th.wc.hide();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n           xhr.send(params);\r\n        }\r\n\r\n    }\r\n});"]}