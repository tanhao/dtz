{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\UserManager.js"],"names":["cc","Class","extends","Component","properties","userId","userName","account","sex","headImgUrl","balance","ip","sign","onLoad","lingshiAuth","th","http","get","onAuth","err","data","log","self","userManager","baseURL","hallAddr","login","callback","errcode","errmsg","id","name","director","loadScene","wc","hide","createRoom","config","params","JSON","stringify","enterRoom","roomId"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAO,IADC;AAERC,kBAAS,IAFD;AAGRC,iBAAQ,IAHA;AAIRC,aAAI,IAJI;AAKRC,oBAAW,IALH;AAMRC,iBAAQ,CANA;AAORC,YAAG,IAPK;AAQRC,cAAK;AARG,KAHP;;AAcLC,YAAQ,kBAAY,CACnB,CAfI;;AAiBL;;AAEA;;AAEA;;AAEA;;AAEAC,iBAAY,uBAAU;AAClBC,WAAGC,IAAH,CAAQC,GAAR,CAAY,eAAZ,EAA4B,EAACV,SAAQ,8BAAT,EAA5B,EAAqE,KAAKW,MAA1E;AACH,KA3BI;;AA6BLA,YAAO,gBAASC,GAAT,EAAaC,IAAb,EAAkB;AACrB,YAAGD,GAAH,EAAO;AACHnB,eAAGqB,GAAH,CAAOF,GAAP;AACA;AACH;AACD,YAAIG,OAAOP,GAAGQ,WAAd;AACAD,aAAKf,OAAL,GAAea,KAAKb,OAApB;AACAe,aAAKV,IAAL,GAAYQ,KAAKR,IAAjB;AACAG,WAAGC,IAAH,CAAQQ,OAAR,GAAkB,YAAUJ,KAAKK,QAAjC;;AAEAzB,WAAGqB,GAAH,CAAON,GAAGC,IAAH,CAAQQ,OAAf;AACAF,aAAKI,KAAL;AACH,KAzCI;;AA2CLA,WAAM,iBAAU;AACZ,YAAIJ,OAAO,IAAX;AACA,YAAIK,WAAW,SAAXA,QAAW,CAASR,GAAT,EAAaC,IAAb,EAAmB;AAC7B,gBAAGD,OAAKC,KAAKQ,OAAb,EAAqB;AACjB5B,mBAAGqB,GAAH,CAAOF,GAAP,EAAWC,KAAKS,MAAhB;AACA;AACH;AACDP,iBAAKd,GAAL,GAAWY,KAAKZ,GAAhB;AACAc,iBAAKjB,MAAL,GAAce,KAAKU,EAAnB;AACAR,iBAAKf,OAAL,GAAea,KAAKb,OAApB;AACAe,iBAAKZ,OAAL,GAAeU,KAAKV,OAApB;AACAY,iBAAKhB,QAAL,GAAgBc,KAAKW,IAArB;AACAT,iBAAKb,UAAL,GAAkBW,KAAKX,UAAvB;AACAT,eAAGgC,QAAH,CAAYC,SAAZ,CAAsB,MAAtB,EAA6B,YAAU;AACnClB,mBAAGmB,EAAH,CAAMC,IAAN;AACH,aAFD;AAGJ,SAdD;AAeApB,WAAGC,IAAH,CAAQC,GAAR,CAAY,QAAZ,EAAqB,EAACV,SAAQe,KAAKf,OAAd,EAAsBK,MAAKU,KAAKV,IAAhC,EAArB,EAA2De,QAA3D;AACH,KA7DI;;AA+DLS,gBAAa,oBAASC,MAAT,EAAgBV,QAAhB,EAAyB;AAClC,YAAIW,SAAO;AACP/B,qBAAQQ,GAAGQ,WAAH,CAAehB,OADhB;AAEPK,kBAAKG,GAAGQ,WAAH,CAAeX,IAFb;AAGPyB,oBAAOE,KAAKC,SAAL,CAAeH,MAAf;AAHA,SAAX;AAKAtB,WAAGC,IAAH,CAAQC,GAAR,CAAY,sBAAZ,EAAmCqB,MAAnC,EAA0CX,QAA1C;AACH,KAtEI;;AAwELc,eAAY,mBAASC,MAAT,EAAgBf,QAAhB,EAAyB;AACjC,YAAIL,OAAO,IAAX;AACH;;AA1EI,CAAT","file":"UserManager.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        userId:null,\r\n        userName:null,\r\n        account:null,\r\n        sex:null,\r\n        headImgUrl:null,\r\n        balance:0,\r\n        ip:null,\r\n        sign:null,\r\n    },\r\n\r\n    onLoad: function () {\r\n    },\r\n\r\n    // update: function (dt) {\r\n\r\n    // },\r\n\r\n    // start: function (dt) {\r\n\r\n    // },\r\n\r\n    lingshiAuth:function(){\r\n        th.http.get('/lingshi_auth',{account:'oy4oyv4IBaxtkPjSq9ee4w42QazA'},this.onAuth);\r\n    },\r\n\r\n    onAuth:function(err,data){\r\n        if(err){\r\n            cc.log(err);\r\n            return ;\r\n        }\r\n        var self = th.userManager;\r\n        self.account = data.account;\r\n        self.sign = data.sign;\r\n        th.http.baseURL = 'http://'+data.hallAddr;\r\n\r\n        cc.log(th.http.baseURL);\r\n        self.login();\r\n    },\r\n\r\n    login:function(){\r\n        var self = this;\r\n        var callback = function(err,data) {\r\n             if(err||data.errcode){\r\n                 cc.log(err,data.errmsg);\r\n                 return;\r\n             }\r\n             self.sex = data.sex;\r\n             self.userId = data.id;\r\n             self.account = data.account;\r\n             self.balance = data.balance;\r\n             self.userName = data.name;\r\n             self.headImgUrl = data.headImgUrl;\r\n             cc.director.loadScene(\"hall\",function(){\r\n                 th.wc.hide();\r\n             });\r\n        };\r\n        th.http.get('/login',{account:self.account,sign:self.sign},callback)\r\n    },\r\n\r\n    createRoom : function(config,callback){\r\n        var params={\r\n            account:th.userManager.account,\r\n            sign:th.userManager.sign,\r\n            config:JSON.stringify(config)\r\n        }\r\n        th.http.get('/create_private_room',params,callback);\r\n    },\r\n\r\n    enterRoom : function(roomId,callback){\r\n        var self = this;\r\n    }\r\n    \r\n});\r\n"]}