{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\UserManager.js"],"names":["cc","Class","extends","Component","properties","userId","userName","account","sex","headImgUrl","balance","ip","sign","onLoad","lingshiAuth","th","wc","show","http","get","onAuth","err","data","log","self","userManager","baseURL","hallAddr","login","callback","errcode","errmsg","id","name","director","loadScene","enterRoom","roomId"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAO,IADC;AAERC,kBAAS,IAFD;AAGRC,iBAAQ,IAHA;AAIRC,aAAI,IAJI;AAKRC,oBAAW,IALH;AAMRC,iBAAQ,CANA;AAORC,YAAG,IAPK;AAQRC,cAAK;AARG,KAHP;;AAcLC,YAAQ,kBAAY,CACnB,CAfI;;AAiBL;;AAEA;;AAEA;;AAEA;;AAEAC,iBAAY,uBAAU;AAClBd,WAAGe,EAAH,CAAMC,EAAN,CAASC,IAAT,CAAc,QAAd;AACAjB,WAAGe,EAAH,CAAMG,IAAN,CAAWC,GAAX,CAAe,eAAf,EAA+B,EAACZ,SAAQ,8BAAT,EAA/B,EAAwE,KAAKa,MAA7E;AACH,KA5BI;;AA8BLA,YAAO,gBAASC,GAAT,EAAaC,IAAb,EAAkB;AACrB,YAAGD,GAAH,EAAO;AACHrB,eAAGuB,GAAH,CAAOF,GAAP;AACA;AACH;AACD,YAAIG,OAAOxB,GAAGe,EAAH,CAAMU,WAAjB;AACAD,aAAKjB,OAAL,GAAee,KAAKf,OAApB;AACAiB,aAAKZ,IAAL,GAAYU,KAAKV,IAAjB;AACAZ,WAAGe,EAAH,CAAMG,IAAN,CAAWQ,OAAX,GAAqB,YAAUJ,KAAKK,QAApC;;AAEA3B,WAAGuB,GAAH,CAAOvB,GAAGe,EAAH,CAAMG,IAAN,CAAWQ,OAAlB;AACAF,aAAKI,KAAL;AACH,KA1CI;;AA4CLA,WAAM,iBAAU;AACZ,YAAIJ,OAAO,IAAX;AACA,YAAIK,WAAW,SAAXA,QAAW,CAASR,GAAT,EAAaC,IAAb,EAAmB;AAC7B,gBAAGD,OAAKC,KAAKQ,OAAb,EAAqB;AACjB9B,mBAAGuB,GAAH,CAAOF,GAAP,EAAWC,KAAKS,MAAhB;AACA;AACH;AACDP,iBAAKhB,GAAL,GAAWc,KAAKd,GAAhB;AACAgB,iBAAKnB,MAAL,GAAciB,KAAKU,EAAnB;AACAR,iBAAKjB,OAAL,GAAee,KAAKf,OAApB;AACAiB,iBAAKd,OAAL,GAAeY,KAAKZ,OAApB;AACAc,iBAAKlB,QAAL,GAAgBgB,KAAKW,IAArB;AACAT,iBAAKf,UAAL,GAAkBa,KAAKb,UAAvB;AACAT,eAAGkC,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACJ,SAZD;AAaAnC,WAAGe,EAAH,CAAMC,EAAN,CAASC,IAAT,CAAc,QAAd;AACAjB,WAAGe,EAAH,CAAMG,IAAN,CAAWC,GAAX,CAAe,QAAf,EAAwB,EAACZ,SAAQiB,KAAKjB,OAAd,EAAsBK,MAAKY,KAAKZ,IAAhC,EAAxB,EAA8DiB,QAA9D;AACH,KA7DI;;AA+DLO,eAAY,mBAASC,MAAT,EAAgBR,QAAhB,EAAyB;AACjC,YAAIL,OAAO,IAAX;AACH;;AAjEI,CAAT","file":"UserManager.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        userId:null,\r\n        userName:null,\r\n        account:null,\r\n        sex:null,\r\n        headImgUrl:null,\r\n        balance:0,\r\n        ip:null,\r\n        sign:null,\r\n    },\r\n\r\n    onLoad: function () {\r\n    },\r\n\r\n    // update: function (dt) {\r\n\r\n    // },\r\n\r\n    // start: function (dt) {\r\n\r\n    // },\r\n\r\n    lingshiAuth:function(){\r\n        cc.th.wc.show(\"正在登录游戏\");\r\n        cc.th.http.get('/lingshi_auth',{account:'oy4oyv4IBaxtkPjSq9ee4w42QazA'},this.onAuth);\r\n    },\r\n\r\n    onAuth:function(err,data){\r\n        if(err){\r\n            cc.log(err);\r\n            return ;\r\n        }\r\n        var self = cc.th.userManager;\r\n        self.account = data.account;\r\n        self.sign = data.sign;\r\n        cc.th.http.baseURL = 'http://'+data.hallAddr;\r\n\r\n        cc.log(cc.th.http.baseURL);\r\n        self.login();\r\n    },\r\n\r\n    login:function(){\r\n        var self = this;\r\n        var callback = function(err,data) {\r\n             if(err||data.errcode){\r\n                 cc.log(err,data.errmsg);\r\n                 return;\r\n             }\r\n             self.sex = data.sex;\r\n             self.userId = data.id;\r\n             self.account = data.account;\r\n             self.balance = data.balance;\r\n             self.userName = data.name;\r\n             self.headImgUrl = data.headImgUrl;\r\n             cc.director.loadScene(\"hall\");\r\n        };\r\n        cc.th.wc.show(\"正在登录游戏\");\r\n        cc.th.http.get('/login',{account:self.account,sign:self.sign},callback)\r\n    },\r\n\r\n    enterRoom : function(roomId,callback){\r\n        var self = this;\r\n    }\r\n    \r\n});\r\n"]}