{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\components/assets\\scripts\\components\\Game.js"],"names":["cc","Class","extends","Component","properties","seatLeft","Node","seatMyself","seatRight","seatUp","options","wangfa","Label","dipai8","Sprite","dipai9","settingWin","menuWin","_myHoldPokers","_myFoldPokers","onLoad","addComponent","initView","initEventHandlers","initWanfaLabel","initDipai","th","audioManager","playBGM","myholds","i","length","holds","getChildByName","j","children","sprite","getComponent","push","spriteFrame","log","hideOptions","self","socketIOManager","dataEventHandler","node","on","data","console","JSON","stringify","string","getWanfa","dipai","getDipai","active","child","onMenuClicked","onDissolveClicked","onLeaveClicked","alert","show","wc","director","loadScene","onSettingClicked","onChatClicked","onVoiceClicked"],"mappings":"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","file":"Game.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        seatLeft:cc.Node,\r\n        seatMyself:cc.Node,\r\n        seatRight:cc.Node,\r\n        seatUp:cc.Node,\r\n        options:cc.Node,\r\n        wangfa:cc.Label,\r\n        dipai8:cc.Sprite,\r\n        dipai9:cc.Sprite,\r\n\r\n        settingWin:cc.Node,\r\n        menuWin:cc.Node,\r\n\r\n        _myHoldPokers:[],\r\n        _myFoldPokers:[]\r\n    },\r\n\r\n    onLoad () {\r\n\r\n        this.addComponent(\"Folds\");\r\n\r\n        this.initView();\r\n        this.initEventHandlers();\r\n        this.initWanfaLabel();\r\n        this.initDipai();\r\n        th.audioManager.playBGM(\"bg_fight.mp3\");\r\n    },\r\n\r\n    initView:function(){\r\n        var myholds=['Holds1','Holds2'];\r\n        for(var i=0;i<myholds.length;i++){\r\n            var holds = this.seatMyself.getChildByName(myholds[i]);\r\n            for(var j=0;j<holds.children.length;j++){\r\n                var sprite = holds.children[j].getComponent(cc.Sprite);\r\n                this._myHoldPokers.push(sprite);\r\n                sprite.spriteFrame = null;\r\n            }\r\n        }\r\n        //this.initDragStuffs(sprite.node);\r\n        cc.log(\"mypokers:\"+this._myHoldPokers.length);\r\n        //var realwidth = cc.director.getVisibleSize().width;\r\n        //cc.log(\"realWidth:\"+(realwidth/1280));\r\n\r\n        this.hideOptions();\r\n    },\r\n\r\n    initEventHandlers:function(){\r\n        var self=this;\r\n        th.socketIOManager.dataEventHandler=this.node;\r\n\r\n        this.node.on('init_info', function (data) {\r\n            console.log('==>Gmae init_info:',JSON.stringify(data));\r\n        });\r\n    },\r\n\r\n    initWanfaLabel:function(){\r\n        this.wangfa.string=th.socketIOManager.getWanfa();\r\n    },\r\n    initDipai:function(){\r\n        var dipai=th.socketIOManager.getDipai();\r\n        cc.log(\"dipai:\"+dipai);\r\n        if(dipai==8){\r\n            this.dipai8.node.active=true;\r\n            this.dipai9.node.active=false;\r\n        }else if(dipai==9){\r\n            this.dipai8.node.active=false;\r\n            this.dipai9.node.active=true;\r\n        }else{\r\n            this.dipai8.node.active=false;\r\n            this.dipai9.node.active=false;\r\n        }\r\n    },\r\n    /*\r\n    update (dt) {\r\n    },\r\n    */\r\n\r\n    hideOptions:function(data){\r\n        this.options.active=false;\r\n        for(var i=0;i<this.options.children.length;i++){\r\n            var child = this.options.children[i]; \r\n            child.active=false;\r\n        }\r\n    },\r\n\r\n    onMenuClicked:function(){\r\n        this.menuWin.active=!this.menuWin.active;\r\n    },\r\n    onDissolveClicked:function(){\r\n        this.menuWin.active=false;\r\n        cc.log('onChatClicked==>');\r\n    },\r\n    onLeaveClicked:function(){\r\n        this.menuWin.active=false;\r\n        th.alert.show(\"返回大厅\",\"返回大厅房间仍会保留，快去邀请大伙来玩吧！\",function(){\r\n            th.wc.show('正在返回游戏大厅');\r\n            cc.director.loadScene(\"hall\");    \r\n        },true)\r\n    },\r\n    onSettingClicked:function(){\r\n        this.menuWin.active=false;\r\n        this.settingWin.active=true;\r\n    },\r\n    onChatClicked:function(){\r\n        cc.log('onChatClicked==>');\r\n    },\r\n    onVoiceClicked:function(){\r\n        cc.log('onVoiceClicked==>');\r\n    },\r\n\r\n\r\n});\r\n"]}